@model ArshatidPublic.Models.RegistrationViewModel
@{
    ViewData["Title"] = "Skráning";
    Layout = "_Layout_plain";
}


@* Show warning if user is not invited *@
@if (ViewBag.NotInvitedMessage is string notInv && !string.IsNullOrWhiteSpace(notInv))
{
    <div class="alert alert-warning">@notInv</div>
}

@* Otherwise show the form *@
@if (ViewBag.NotInvitedMessage == null)
{
    <div class="container mt-3">
        <form asp-controller="Home" asp-action="Skraning" method="post" class="row g-3">
            @Html.AntiForgeryToken()

            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="col-12">
                <div class="form-check">
                    <input class="form-check-input" asp-for="Plus" />
                    <label class="form-check-label" asp-for="Plus">Plús einn</label>
                </div>
            </div>

            <div class="col-12">
                <label class="form-label" asp-for="Alergies"></label>
                <input class="form-control" asp-for="Alergies" />
                <span class="text-danger" asp-validation-for="Alergies"></span>
            </div>

            <div class="col-12">
                <button type="submit" class="btn btn-success me-2">@((ViewBag.HasRegistration ?? false) ? "Breyta" : "Skrá")</button>

                @* Separate post to Home/KemstEkki, keeping it inline *@
                @if (ViewBag.HasRegistration ?? false)
                {
                    <button type="submit"
                            class="btn btn-danger"
                            formaction='@Url.Action("KemstEkki", "Home")'
                            formmethod="post"
                            onclick="return confirm('Ertu alveg viss um að þú getir ekki verið með? Við höfum svo gaman af félagsskap þínum.');">
                        Kemst ekki
                    </button>
                }
            </div>
        </form>
    </div>
}
